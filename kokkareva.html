<input id="inp"><br>
<button id="bt">v2</button>

<script  type="text/javascript>
  {
       (bt => {
               bt.addEventListener(
                  'click',
                  async () => {
                    const inp = document.querySelector('#inp').value;
                     
                    let ans = document.querySelector('#inp');  
                    var buffer = new TextEncoder("utf-8").encode(str);
                    crypto.subtle.digest("SHA-1", buffer).then(
                      function (hash) {
                        document.getElementById("inp").value = hex(hash)
                      }
                    );
                    //ans.value = crypto.subtle.digest('SHA-1', inp);
                  }
               );
       })(document.querySelector('#bt'));
}
</script>
